<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Readiness: Integer Mastery</title>
    
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        .number-line-mark { transition: all 0.3s ease; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ICONS ---
        const Icon = ({ children, size = 20, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {children}
            </svg>
        );

        const Plus = (props) => <Icon {...props}><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></Icon>;
        const Minus = (props) => <Icon {...props}><line x1="5" y1="12" x2="19" y2="12"></line></Icon>;
        const X = (props) => <Icon {...props}><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></Icon>;
        const Divide = (props) => <Icon {...props}><circle cx="12" cy="6" r="1"></circle><line x1="5" y1="12" x2="19" y2="12"></line><circle cx="12" cy="18" r="1"></circle></Icon>;
        const CheckCircle = (props) => <Icon {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></Icon>;
        const XCircle = (props) => <Icon {...props}><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></Icon>;
        const ArrowRight = (props) => <Icon {...props}><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></Icon>;
        const Award = (props) => <Icon {...props}><circle cx="12" cy="8" r="7"/><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/></Icon>;
        const Info = (props) => <Icon {...props}><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></Icon>;
        const RotateCcw = (props) => <Icon {...props}><polyline points="1 4 1 10 7 10"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/></Icon>;
        const BookOpen = (props) => <Icon {...props}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></Icon>;
        const TrendingDown = (props) => <Icon {...props}><polyline points="23 18 13.5 8.5 8.5 13.5 1 6"></polyline><polyline points="17 18 23 18 23 12"></polyline></Icon>;

        // --- DATA & CURRICULUM CONTENT ---

        const TOPICS = [
            {
                id: 'addition',
                title: 'Adding Integers',
                icon: <Plus size={20} />,
                description: 'Rules for adding negative and positive numbers.',
                theory: (
                <div className="space-y-4 text-slate-700">
                    <h3 className="font-bold text-lg text-indigo-700">The Rules of Addition</h3>
                    <div className="grid gap-4">
                        <div className="bg-blue-50 p-3 rounded border border-blue-200">
                            <h4 className="font-bold text-blue-800">1. Same Signs? (Add & Keep)</h4>
                            <p className="text-sm">If the signs are the same, just add the numbers and keep the sign.</p>
                            <div className="mt-2 font-mono text-sm bg-white p-2 rounded">
                                -5 + -3 = -8 <br/>
                                <span className="text-slate-400 text-xs">(Both negative? Answer is negative.)</span>
                            </div>
                        </div>
                        <div className="bg-purple-50 p-3 rounded border border-purple-200">
                            <h4 className="font-bold text-purple-800">2. Different Signs? (Subtract)</h4>
                            <p className="text-sm">If signs are different, ignore the signs, subtract the smaller from the larger, and keep the sign of the "heavier" number.</p>
                            <div className="mt-2 font-mono text-sm bg-white p-2 rounded">
                                -10 + 4 = -6 <br/>
                                <span className="text-slate-400 text-xs">(10 is bigger than 4, so answer is negative.)</span>
                            </div>
                        </div>
                    </div>
                </div>
                ),
                questions: [
                    {
                        id: 1,
                        question: "Add: (-42) + -15",
                        options: [
                            "-27",
                            "57",
                            "-57",
                            "-30"
                        ],
                        correctIndex: 2,
                        explanation: "Both numbers are negative (Same Signs). We ADD the numbers (42 + 15 = 57) and KEEP the negative sign. Answer is -57."
                    },
                    {
                        id: 2,
                        question: "Add: -6 + -6",
                        options: ["0", "-12", "12", "36"],
                        correctIndex: 1,
                        explanation: "Same signs add! 6 + 6 = 12. Since they are both negative, the answer is -12."
                    },
                    {
                        id: 3,
                        question: "Solve: [-4 + (-2)] + [-5 + (-5)]",
                        options: ["-6", "-16", "16", "-10"],
                        correctIndex: 1,
                        explanation: "Do the brackets first. [-4 + -2] = -6. And [-5 + -5] = -10. Now add the results: -6 + -10 = -16."
                    },
                    {
                        id: 4,
                        question: "Add: -100 + 1",
                        options: ["-101", "99", "-99", "101"],
                        correctIndex: 2,
                        explanation: "Different signs! Subtract 100 - 1 = 99. The larger number (100) is negative, so the answer is -99."
                    }
                ]
            },
            {
                id: 'subtraction',
                title: 'Subtracting Integers',
                icon: <Minus size={20} />,
                description: 'Keep-Change-Change strategy.',
                theory: (
                <div className="space-y-4 text-slate-700">
                    <h3 className="font-bold text-lg text-indigo-700">Keep - Change - Change</h3>
                    <p>Subtraction is actually just adding the opposite. We never really subtract integers!</p>
                    <div className="bg-orange-50 p-4 rounded-lg border border-orange-200 text-sm">
                        <strong className="block mb-2 text-orange-800">The KCC Method:</strong>
                        <ol className="list-decimal pl-5 space-y-1">
                            <li><strong>KEEP</strong> the first number exactly the same.</li>
                            <li><strong>CHANGE</strong> the minus sign to a plus sign.</li>
                            <li><strong>CHANGE</strong> the sign of the second number (flip it).</li>
                        </ol>
                        <div className="mt-3 font-mono bg-white p-2 rounded">
                            Ex: 5 - (-3)<br/>
                            1. Keep 5<br/>
                            2. Change - to +<br/>
                            3. Change (-3) to 3<br/>
                            Result: 5 + 3 = 8
                        </div>
                    </div>
                </div>
                ),
                questions: [
                    {
                        id: 5,
                        question: "Subtract: -15 - (-5)",
                        options: ["-20", "-10", "10", "20"],
                        correctIndex: 1,
                        explanation: "Use KCC: Keep -15. Change minus to plus. Change -5 to 5. New problem: -15 + 5. Different signs, so subtract (15-5=10) and keep sign of larger (-). Answer: -10."
                    },
                    {
                        id: 6,
                        question: "Subtract: 8 - 12",
                        options: ["4", "-4", "-20", "20"],
                        correctIndex: 1,
                        explanation: "KCC: Keep 8. Change to +. Change 12 to -12. Problem: 8 + (-12). Subtract 12 - 8 = 4. 12 is negative, so -4."
                    }
                ]
            },
            {
                id: 'mult_div',
                title: 'Mult & Divide',
                icon: <X size={20} />,
                description: 'Tic-Tac-Toe sign rules.',
                theory: (
                <div className="space-y-4 text-slate-700">
                    <h3 className="font-bold text-lg text-indigo-700">The Sign Rules</h3>
                    <p>Multiplication and Division follow the exact same rules for signs.</p>
                    <div className="grid grid-cols-2 gap-4 text-center">
                        <div className="bg-green-50 p-3 rounded border border-green-200">
                            <div className="text-2xl mb-1">üòÉ + üòÉ</div>
                            <div className="font-bold text-green-800">Same Signs</div>
                            <div className="text-sm">Answer is POSITIVE</div>
                            <div className="font-mono text-xs mt-1">-5 √ó -5 = 25</div>
                        </div>
                        <div className="bg-red-50 p-3 rounded border border-red-200">
                            <div className="text-2xl mb-1">üòÉ + ‚òπÔ∏è</div>
                            <div className="font-bold text-red-800">Different Signs</div>
                            <div className="text-sm">Answer is NEGATIVE</div>
                            <div className="font-mono text-xs mt-1">-5 √ó 5 = -25</div>
                        </div>
                    </div>
                    <div className="bg-yellow-50 p-3 rounded border border-yellow-200 text-sm mt-2">
                        <strong>‚ö†Ô∏è The Zero Rule:</strong>
                        <ul className="list-disc pl-5 mt-1">
                            <li>0 √∑ 5 = 0 (Totally fine)</li>
                            <li>5 √∑ 0 = <strong>Undefined</strong> (Impossible!)</li>
                        </ul>
                    </div>
                </div>
                ),
                questions: [
                    {
                        id: 11,
                        question: "Divide: -50 √∑ 2",
                        options: ["25", "-25", "52", "-48"],
                        correctIndex: 1,
                        explanation: "Signs are different (- and +). Answer must be negative. 50 √∑ 2 = 25. So, -25."
                    },
                    {
                        id: 12,
                        question: "Multiply: -4 √ó -9",
                        options: ["-36", "36", "-13", "13"],
                        correctIndex: 1,
                        explanation: "Signs are the same (both negative). Answer must be positive. 4 √ó 9 = 36."
                    },
                    {
                        id: 13,
                        question: "Divide: 12 √∑ 0",
                        options: ["0", "12", "-12", "Undefined"],
                        correctIndex: 3,
                        explanation: "You cannot divide by zero. It is impossible/undefined."
                    },
                    {
                        id: 14,
                        question: "Divide: 0 √∑ -7",
                        options: ["0", "7", "-7", "Undefined"],
                        correctIndex: 0,
                        explanation: "Zero divided by anything is just zero."
                    }
                ]
            },
            {
                id: 'word_problems',
                title: 'Word Problems',
                icon: <TrendingDown size={20} />,
                description: 'Real world applications.',
                theory: (
                <div className="space-y-4 text-slate-700">
                    <h3 className="font-bold text-lg text-indigo-700">Keywords</h3>
                    <ul className="list-disc pl-5 space-y-2">
                        <li><strong>Negative Words:</strong> Descend, Drop, Withdraw, Below Sea Level, Debt.</li>
                        <li><strong>Positive Words:</strong> Ascend, Rise, Deposit, Profit, Above.</li>
                    </ul>
                    <div className="bg-indigo-50 p-3 rounded border border-indigo-200 text-sm">
                        <p><strong>Example:</strong> A diver descends 10ft per minute. Where are they after 5 mins?</p>
                        <p className="font-mono mt-1">(-10) √ó 5 = -50ft</p>
                    </div>
                </div>
                ),
                questions: [
                    {
                        id: 15,
                        question: "A submarine descends (goes down) 15 feet every minute. How many feet will it have descended after 20 minutes?",
                        options: ["35 ft", "-300 ft", "-35 ft", "300 ft"],
                        correctIndex: 1,
                        explanation: "Descend means negative (-15). Time is positive (20). Multiply: -15 √ó 20 = -300 ft."
                    },
                    {
                        id: 16,
                        question: "The temperature dropped 3 degrees every hour for 4 hours. What was the total change in temperature?",
                        options: ["-12 degrees", "12 degrees", "-7 degrees", "7 degrees"],
                        correctIndex: 0,
                        explanation: "Drop means negative (-3). 4 hours is positive. -3 √ó 4 = -12."
                    }
                ]
            }
        ];

        // --- VISUALIZERS ---

        const NumberLineVisualizer = ({ highlight }) => (
            <div className="w-full bg-white rounded-lg border border-slate-200 p-6 mb-6">
                <div className="text-center mb-4 text-sm text-slate-500 font-bold">Visualizing Addition: Moving on the Line</div>
                <div className="relative h-12 flex items-center">
                    <div className="absolute w-full h-1 bg-slate-300 top-1/2"></div>
                    {[-5, -4, -3, -2, -1, 0, 1, 2, 3, 4, 5].map((num, i) => (
                        <div key={num} className="absolute text-xs font-mono text-slate-400 flex flex-col items-center" style={{left: `${(i/10)*100}%`}}>
                            <div className="h-2 w-0.5 bg-slate-300 mb-1"></div>
                            {num}
                        </div>
                    ))}
                    
                    {/* Animated Arrow Example for -2 + -3 */}
                    <div className="absolute top-0 left-[50%] w-0.5 h-3 bg-red-500 z-10"></div> {/* Start at 0 */}
                    
                    {/* Move to -2 */}
                    <div className="absolute h-1 bg-red-500 top-1/2 left-[30%] w-[20%] opacity-50 rounded-full"></div>
                    
                    {/* Move 3 more left */}
                    {highlight && (
                        <div className="absolute h-1 bg-indigo-600 top-1/2 left-[0%] w-[30%] rounded-full animate-pulse"></div>
                    )}
                </div>
                <div className="text-center mt-2 text-xs text-slate-400">
                    Left is Negative (-) &nbsp;&nbsp;|&nbsp;&nbsp; Right is Positive (+)
                </div>
            </div>
        );

        const ProgressBar = ({ current, total }) => {
            const width = `${(current / total) * 100}%`;
            return (
                <div className="w-full bg-slate-200 h-2 rounded-full overflow-hidden mt-2">
                    <div className="bg-indigo-600 h-full transition-all duration-500" style={{ width }}></div>
                </div>
            );
        };

        // --- MAIN APP COMPONENT ---

        function IntegerPrep() {
            const [view, setView] = useState('home'); // home, learn, practice
            const [activeTopicId, setActiveTopicId] = useState(null);
            const [currentQuestionIdx, setCurrentQuestionIdx] = useState(0);
            const [selectedAnswer, setSelectedAnswer] = useState(null);
            const [isCorrect, setIsCorrect] = useState(null);
            const [showExplanation, setShowExplanation] = useState(false);
            const [score, setScore] = useState(0);
            const [streak, setStreak] = useState(0);

            const activeTopic = TOPICS.find(t => t.id === activeTopicId);

            // Reset question state
            useEffect(() => {
                setSelectedAnswer(null);
                setIsCorrect(null);
                setShowExplanation(false);
            }, [currentQuestionIdx, activeTopicId]);

            const handleTopicSelect = (topicId, mode) => {
                setActiveTopicId(topicId);
                setCurrentQuestionIdx(0);
                setScore(0);
                setStreak(0);
                setView(mode);
            };

            const handleAnswerClick = (index) => {
                if (selectedAnswer !== null) return;

                setSelectedAnswer(index);
                const correct = index === activeTopic.questions[currentQuestionIdx].correctIndex;
                setIsCorrect(correct);
                setShowExplanation(true);

                if (correct) {
                    setScore(score + 10 + (streak * 2));
                    setStreak(streak + 1);
                } else {
                    setStreak(0);
                }
            };

            const handleNext = () => {
                if (currentQuestionIdx < activeTopic.questions.length - 1) {
                    setCurrentQuestionIdx(currentQuestionIdx + 1);
                } else {
                    setView('results');
                }
            };

            // --- VIEWS ---

            const renderHome = () => (
                <div className="max-w-3xl mx-auto p-6">
                    <div className="text-center mb-10">
                    <h1 className="text-4xl font-extrabold text-indigo-900 mb-2">Math Readiness</h1>
                    <p className="text-slate-600">Mastering Integers: Addition, Subtraction, Multiplication & Division.</p>
                    </div>

                    <div className="grid md:grid-cols-2 gap-6">
                    {TOPICS.map((topic) => (
                        <div key={topic.id} className="bg-white rounded-xl shadow-md border border-slate-100 p-6 hover:shadow-lg transition-shadow flex flex-col h-full">
                        <div className="flex items-center gap-3 mb-3 text-indigo-600">
                            {topic.icon}
                            <h2 className="font-bold text-lg leading-tight">{topic.title}</h2>
                        </div>
                        <p className="text-sm text-slate-500 mb-6 flex-grow">{topic.description}</p>
                        <div className="flex gap-2">
                            <button 
                            onClick={() => handleTopicSelect(topic.id, 'learn')}
                            className="flex-1 bg-indigo-50 text-indigo-700 py-2 rounded-lg font-medium hover:bg-indigo-100 transition-colors"
                            >
                            Learn Rules
                            </button>
                            <button 
                            onClick={() => handleTopicSelect(topic.id, 'practice')}
                            className="flex-1 bg-indigo-600 text-white py-2 rounded-lg font-medium hover:bg-indigo-700 transition-colors"
                            >
                            Start Quiz
                            </button>
                        </div>
                        </div>
                    ))}
                    </div>
                </div>
            );

            const renderLearn = () => (
                <div className="max-w-2xl mx-auto p-6">
                    <button onClick={() => setView('home')} className="flex items-center text-slate-500 hover:text-slate-800 mb-6">
                    <RotateCcw size={16} className="mr-2" /> Back to Menu
                    </button>

                    <div className="bg-white rounded-2xl shadow-xl overflow-hidden">
                    <div className="bg-indigo-600 p-6 text-white">
                        <h2 className="text-2xl font-bold flex items-center gap-3">
                        <BookOpen size={24} />
                        {activeTopic.title}
                        </h2>
                    </div>
                    
                    <div className="p-8">
                        {activeTopic.theory}

                        <div className="mt-8 flex justify-end">
                        <button 
                            onClick={() => setView('practice')}
                            className="flex items-center bg-green-600 text-white px-6 py-3 rounded-full font-bold hover:bg-green-700 shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all"
                        >
                            I'm Ready to Quiz <ArrowRight size={20} className="ml-2" />
                        </button>
                        </div>
                    </div>
                    </div>
                </div>
            );

            const renderPractice = () => {
                const question = activeTopic.questions[currentQuestionIdx];

                return (
                    <div className="max-w-2xl mx-auto p-4 md:p-6">
                    {/* Header */}
                    <div className="flex justify-between items-center mb-6">
                        <button onClick={() => setView('home')} className="text-slate-400 hover:text-slate-600">
                        <XCircle size={24} />
                        </button>
                        <div className="flex items-center gap-4">
                        <div className="bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full text-sm font-bold">
                            Streak: {streak} üî•
                        </div>
                        <div className="text-slate-600 font-medium">
                            Score: {score}
                        </div>
                        </div>
                    </div>

                    {/* Progress */}
                    <div className="mb-6">
                        <div className="flex justify-between text-xs text-slate-400 uppercase tracking-wider mb-1">
                        <span>Question {currentQuestionIdx + 1} of {activeTopic.questions.length}</span>
                        <span>{activeTopic.title}</span>
                        </div>
                        <ProgressBar current={currentQuestionIdx + 1} total={activeTopic.questions.length} />
                    </div>

                    {/* Question Card */}
                    <div className="bg-white rounded-2xl shadow-lg border border-slate-100 overflow-hidden relative">
                        <div className="p-6 md:p-8">
                        <h3 className="text-lg md:text-xl font-medium text-slate-800 mb-6 leading-relaxed">
                            {question.question}
                        </h3>

                        {/* Interactive Visual for Addition */}
                        {activeTopic.id === 'addition' && (
                            <NumberLineVisualizer highlight={showExplanation} />
                        )}

                        <div className="space-y-3">
                            {question.options.map((option, idx) => {
                            let btnClass = "w-full text-left p-4 rounded-xl border-2 transition-all duration-200 flex justify-between items-center group ";
                            
                            if (selectedAnswer === null) {
                                btnClass += "border-slate-100 hover:border-indigo-300 hover:bg-indigo-50 cursor-pointer";
                            } else if (idx === question.correctIndex) {
                                btnClass += "border-green-500 bg-green-50 text-green-800";
                            } else if (selectedAnswer === idx) {
                                btnClass += "border-red-400 bg-red-50 text-red-800";
                            } else {
                                btnClass += "border-slate-100 opacity-50";
                            }

                            return (
                                <button
                                key={idx}
                                onClick={() => handleAnswerClick(idx)}
                                disabled={selectedAnswer !== null}
                                className={btnClass}
                                >
                                <span className="font-medium">{option}</span>
                                {selectedAnswer !== null && idx === question.correctIndex && <CheckCircle size={20} className="text-green-600" />}
                                {selectedAnswer === idx && idx !== question.correctIndex && <XCircle size={20} className="text-red-500" />}
                                </button>
                            );
                            })}
                        </div>
                        </div>

                        {/* Feedback Section */}
                        {showExplanation && (
                        <div className={`p-6 border-t ${isCorrect ? 'bg-green-50 border-green-100' : 'bg-orange-50 border-orange-100'}`}>
                            <div className="flex gap-3 mb-2">
                            {isCorrect ? (
                                <div className="p-2 bg-green-100 rounded-full h-fit text-green-600"><CheckCircle size={24} /></div>
                            ) : (
                                <div className="p-2 bg-orange-100 rounded-full h-fit text-orange-600"><Info size={24} /></div>
                            )}
                            <div>
                                <h4 className={`font-bold ${isCorrect ? 'text-green-800' : 'text-orange-800'}`}>
                                {isCorrect ? 'Correct!' : 'Not quite right'}
                                </h4>
                                <p className="text-slate-700 text-sm mt-1 leading-relaxed">{question.explanation}</p>
                            </div>
                            </div>
                            <div className="flex justify-end mt-4">
                            <button 
                                onClick={handleNext}
                                className="bg-indigo-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-indigo-700 transition-colors flex items-center"
                            >
                                {currentQuestionIdx < activeTopic.questions.length - 1 ? 'Next Question' : 'Finish Quiz'}
                                <ArrowRight size={18} className="ml-2" />
                            </button>
                            </div>
                        </div>
                        )}
                    </div>
                    </div>
                );
            };

            const renderResults = () => (
                <div className="max-w-md mx-auto p-8 text-center mt-10">
                    <div className="mb-6 inline-block p-6 rounded-full bg-yellow-100 text-yellow-600 shadow-inner">
                    <Award size={64} />
                    </div>
                    <h2 className="text-3xl font-bold text-slate-800 mb-2">Topic Complete!</h2>
                    <p className="text-slate-500 mb-8">You scored {score} points on {activeTopic.title}.</p>
                    
                    <div className="space-y-3">
                    <button 
                        onClick={() => {
                        setCurrentQuestionIdx(0);
                        setScore(0);
                        setStreak(0);
                        setView('practice');
                        }}
                        className="w-full bg-indigo-600 text-white py-3 rounded-xl font-bold hover:bg-indigo-700 transition-colors"
                    >
                        Try Again
                    </button>
                    <button 
                        onClick={() => setView('home')}
                        className="w-full bg-white text-slate-600 border border-slate-200 py-3 rounded-xl font-bold hover:bg-slate-50 transition-colors"
                    >
                        Choose Different Topic
                    </button>
                    </div>
                </div>
            );

            return (
                <div className="min-h-screen bg-slate-50 font-sans text-slate-900">
                    {view === 'home' && renderHome()}
                    {view === 'learn' && renderLearn()}
                    {view === 'practice' && renderPractice()}
                    {view === 'results' && renderResults()}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<IntegerPrep />);
    </script>
</body>
</html>

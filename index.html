<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudyMastery: Probability & Randomness</title>
    
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Lucide Icons (Inline SVGs used in code, but loading library just in case for specific dynamic needs) -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body { font-family: 'Inter', sans-serif; }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // ==========================================
        // CONTENT DATABASE (Based on PDF Analysis)
        // ==========================================
        const curriculum = [
            {
                id: "independent-dependent",
                title: "Independent vs. Dependent Events",
                icon: "repeat",
                color: "blue",
                theory: {
                    intro: "When dealing with multiple events, the most critical question is: Does the first event change the options for the second?",
                    points: [
                        { title: "Independent Events", text: "The outcome of one event does NOT affect the other. Example: Rolling a die, then flipping a coin. Or drawing a card and PUTTING IT BACK (Replacement)." },
                        { title: "Dependent Events", text: "The outcome of the first event changes the probability of the second. Example: Eating a jellybean from a jar. There is now one less jellybean for the next pick (No Replacement)." }
                    ]
                },
                questions: [
                    {
                        id: 1,
                        question: "You have a deck of 10 numbered cards (1-10). You pick a card, look at it, and keep it in your pocket. Then you pick another card. Is this Independent or Dependent?",
                        options: ["Independent", "Dependent"],
                        correct: 1,
                        explanation: "Since you kept the card in your pocket, there are only 9 cards left for the second draw. The total changed, making it Dependent."
                    },
                    {
                        id: 2,
                        question: "A spinner has 4 colors. You spin it once, record the color, and spin it again. Independent or Dependent?",
                        options: ["Independent", "Dependent"],
                        correct: 0,
                        explanation: "The spinner doesn't change after you spin it. The probabilities remain exactly the same for the second spin."
                    },
                    {
                        id: 3,
                        question: "A cookie jar has 5 chocolate and 5 oatmeal cookies. You eat one chocolate cookie. What is the probability of picking a chocolate cookie next?",
                        options: ["5/10 (50%)", "4/10 (40%)", "4/9 (44.4%)", "5/9 (55.5%)"],
                        correct: 2,
                        explanation: "This is a dependent event. You started with 10. You ate 1, so 9 are left. You ate a chocolate, so only 4 chocolate are left. Result: 4/9."
                    }
                ]
            },
            {
                id: "compound-probability",
                title: "Compound Probability",
                icon: "layers",
                color: "indigo",
                theory: {
                    intro: "Compound probability involves finding the chance of two or more things happening together.",
                    points: [
                        { title: "The 'AND' Rule (Multiplication)", text: "To find the probability of Event A AND Event B happening, you MULTIPLY their probabilities." },
                        { title: "Formula", text: "P(A and B) = P(A) √ó P(B)" },
                        { title: "Watch Out!", text: "If the events are Dependent (see Module 1), make sure you adjust the fraction for the second event before multiplying!" }
                    ]
                },
                questions: [
                    {
                        id: 1,
                        question: "A drawer contains 4 red socks and 6 blue socks (10 total). You pick one, put it back, then pick another. Probability of Red AND Red?",
                        options: ["16%", "24%", "40%", "10%"],
                        correct: 0,
                        explanation: "P(Red) = 4/10. Since you put it back (Independent), the second P(Red) is also 4/10. Multiply: 0.4 √ó 0.4 = 0.16 (16%)."
                    },
                    {
                        id: 2,
                        question: "A box has 3 Lemon chews and 7 Cherry chews (10 total). You eat one Lemon chew, then pick another chew. Probability of Lemon THEN Lemon?",
                        options: ["9/100", "6/90", "3/10", "1/10"],
                        correct: 1,
                        explanation: "First pick: 3/10. Second pick (Dependent!): Only 2 Lemons left and 9 total chews left (2/9). Multiply: (3/10) √ó (2/9) = 6/90."
                    },
                    {
                        id: 3,
                        question: "You roll a standard die and flip a coin. Probability of rolling a 6 AND getting Tails?",
                        options: ["1/6", "1/2", "1/12", "1/8"],
                        correct: 2,
                        explanation: "P(6) = 1/6. P(Tails) = 1/2. These are independent. Multiply: (1/6) √ó (1/2) = 1/12."
                    }
                ]
            },
            {
                id: "modeling-randomness",
                title: "Expected Value & Area",
                icon: "target",
                color: "emerald",
                theory: {
                    intro: "Expected Value (EV) helps us predict the 'average' outcome if we repeated an experiment thousands of times. It is crucial for games of chance and insurance.",
                    points: [
                        { title: "Geometric Probability", text: "If a target has different zones, the probability of hitting a zone is: (Area of Zone) / (Total Area)." },
                        { title: "Calculating Expected Value", text: "Multiply each outcome's value (points or money) by its probability, then add them all together." },
                        { title: "Formula", text: "EV = (Value1 √ó Prob1) + (Value2 √ó Prob2) + ..." }
                    ]
                },
                questions: [
                    {
                        id: 1,
                        question: "A game board is 100 in¬≤. The winning 'Red Zone' is 20 in¬≤. If you hit Red, you win $10. If you miss Red, you lose $2. What is the expected value per throw?",
                        options: ["$2.00", "$0.40", "$1.00", "$8.00"],
                        correct: 1,
                        explanation: "P(Red) = 20/100 = 0.2. P(Miss) = 80/100 = 0.8. EV = (0.2 √ó $10) + (0.8 √ó -$2) = $2.00 - $1.60 = $0.40."
                    },
                    {
                        id: 2,
                        question: "A raffle ticket costs $5. There is a 1/100 chance to win $200, and a 99/100 chance to win nothing ($0). What is the expected value of buying a ticket?",
                        options: ["$200", "-$3.00", "$2.00", "-$5.00"],
                        correct: 1,
                        explanation: "Ignore the cost first. Expected Winnings = (1/100 √ó $200) + (99/100 √ó 0) = $2. Now subtract the cost ($5). Total EV = $2 - $5 = -$3.00."
                    },
                    {
                        id: 3,
                        question: "A dartboard has a Bullseye (10 pts, area=5) and Outer Ring (2 pts, area=45). Total area is 50. Expected score?",
                        options: ["2.8 points", "6 points", "3.4 points", "5 points"],
                        correct: 0,
                        explanation: "P(Bullseye) = 5/50 = 0.1. P(Outer) = 45/50 = 0.9. EV = (0.1 √ó 10) + (0.9 √ó 2) = 1 + 1.8 = 2.8 points."
                    }
                ]
            }
        ];

        // ==========================================
        // VISUALIZER COMPONENTS
        // ==========================================
        
        // 1. Marble/Card Visualizer (Independent vs Dependent)
        const UrnVisualizer = () => {
            const [marbles, setMarbles] = useState([
                {id: 1, color: 'bg-red-500'}, {id: 2, color: 'bg-red-500'}, 
                {id: 3, color: 'bg-blue-500'}, {id: 4, color: 'bg-blue-500'}, {id: 5, color: 'bg-blue-500'}
            ]);
            const [picked, setPicked] = useState([]);
            const [mode, setMode] = useState('dependent'); // 'independent' or 'dependent'
            const [history, setHistory] = useState("");

            const pickMarble = () => {
                if (marbles.length === 0) return;
                const randomIndex = Math.floor(Math.random() * marbles.length);
                const selected = marbles[randomIndex];
                
                // Animation logic
                setPicked([selected]);
                
                if (mode === 'dependent') {
                    const newMarbles = marbles.filter((_, i) => i !== randomIndex);
                    setMarbles(newMarbles);
                    setHistory(`Picked ${selected.color === 'bg-red-500' ? 'Red' : 'Blue'}. Remaining: ${newMarbles.length}`);
                } else {
                    setHistory(`Picked ${selected.color === 'bg-red-500' ? 'Red' : 'Blue'}. Put it back. Remaining: ${marbles.length}`);
                }
            };

            const reset = () => {
                setMarbles([
                    {id: 1, color: 'bg-red-500'}, {id: 2, color: 'bg-red-500'}, 
                    {id: 3, color: 'bg-blue-500'}, {id: 4, color: 'bg-blue-500'}, {id: 5, color: 'bg-blue-500'}
                ]);
                setPicked([]);
                setHistory("Jar reset.");
            }

            return (
                <div className="bg-white p-6 rounded-xl shadow-sm border border-slate-200 my-4">
                    <h3 className="font-bold text-lg mb-2">Simulate: The Marble Jar</h3>
                    <div className="flex gap-4 mb-4 text-sm">
                        <button onClick={() => { setMode('independent'); reset(); }} className={`px-3 py-1 rounded-full ${mode === 'independent' ? 'bg-blue-600 text-white' : 'bg-slate-100'}`}>Independent (With Replacement)</button>
                        <button onClick={() => { setMode('dependent'); reset(); }} className={`px-3 py-1 rounded-full ${mode === 'dependent' ? 'bg-blue-600 text-white' : 'bg-slate-100'}`}>Dependent (No Replacement)</button>
                    </div>

                    <div className="flex items-center justify-center gap-8 mb-4">
                        {/* The Jar */}
                        <div className="w-32 h-32 border-4 border-slate-300 rounded-b-xl rounded-t-md relative flex flex-wrap content-end p-2 gap-1 bg-slate-50">
                            {marbles.map(m => (
                                <div key={m.id} className={`w-6 h-6 rounded-full shadow-sm ${m.color}`}></div>
                            ))}
                        </div>
                        
                        {/* The Arrow */}
                        <div className="text-2xl text-slate-400">‚ûî</div>

                        {/* The Hand/Pick */}
                        <div className="w-16 h-16 border-2 border-dashed border-slate-300 rounded-lg flex items-center justify-center">
                            {picked.length > 0 ? (
                                <div className={`w-8 h-8 rounded-full ${picked[0].color} animate-bounce`}></div>
                            ) : <span className="text-xs text-slate-400">?</span>}
                        </div>
                    </div>

                    <div className="text-center">
                        <button onClick={pickMarble} disabled={marbles.length === 0} className="bg-emerald-500 text-white px-6 py-2 rounded-lg font-bold hover:bg-emerald-600 disabled:opacity-50">
                            Pick a Marble
                        </button>
                        <button onClick={reset} className="ml-2 text-slate-500 px-4 py-2 hover:text-slate-700">Reset</button>
                    </div>
                    <p className="text-center text-sm text-slate-600 mt-3 font-mono">{history}</p>
                </div>
            );
        };

        // 2. Dartboard Visualizer (Expected Value)
        const DartboardVisualizer = () => {
            const [highlight, setHighlight] = useState(null);
            
            // Areas: 
            // Blue (Outer): Area 400, Value 5
            // Red (Inner): Area 100, Value 20
            
            const totalArea = 500;
            const pRed = 100/500;
            const pBlue = 400/500;
            
            const ev = (pRed * 20) + (pBlue * 5);

            return (
                <div className="bg-white p-6 rounded-xl shadow-sm border border-slate-200 my-4 flex flex-col md:flex-row items-center gap-8">
                    <div className="relative w-48 h-48">
                        <svg viewBox="0 0 100 100" className="w-full h-full drop-shadow-md">
                            {/* Outer Circle (Blue) */}
                            <circle cx="50" cy="50" r="48" fill="#3b82f6" 
                                className={`transition-opacity cursor-pointer ${highlight === 'blue' ? 'opacity-100 stroke-4 stroke-white' : 'opacity-80 hover:opacity-100'}`}
                                onMouseEnter={() => setHighlight('blue')}
                                onMouseLeave={() => setHighlight(null)}
                            />
                            {/* Inner Circle (Red) */}
                            <circle cx="50" cy="50" r="24" fill="#ef4444" 
                                className={`transition-opacity cursor-pointer ${highlight === 'red' ? 'opacity-100 stroke-4 stroke-white' : 'opacity-90 hover:opacity-100'}`}
                                onMouseEnter={() => setHighlight('red')}
                                onMouseLeave={() => setHighlight(null)}
                            />
                            <text x="50" y="30" textAnchor="middle" fill="white" className="text-[10px] font-bold pointer-events-none">20 pts</text>
                            <text x="50" y="80" textAnchor="middle" fill="white" className="text-[10px] font-bold pointer-events-none">5 pts</text>
                        </svg>
                    </div>
                    
                    <div className="flex-1 space-y-2 text-sm">
                        <h4 className="font-bold text-slate-700">Expected Value Calculator</h4>
                        
                        <div className={`p-2 rounded transition-colors ${highlight === 'red' ? 'bg-red-50 border border-red-200' : ''}`}>
                            <span className="font-bold text-red-600">Red Zone:</span> 
                            <div className="grid grid-cols-2 gap-2 text-xs text-slate-600">
                                <div>Area: 100</div>
                                <div>Prob: 100/{totalArea} = <strong>0.2</strong></div>
                            </div>
                        </div>

                        <div className={`p-2 rounded transition-colors ${highlight === 'blue' ? 'bg-blue-50 border border-blue-200' : ''}`}>
                            <span className="font-bold text-blue-600">Blue Zone:</span> 
                            <div className="grid grid-cols-2 gap-2 text-xs text-slate-600">
                                <div>Area: 400</div>
                                <div>Prob: 400/{totalArea} = <strong>0.8</strong></div>
                            </div>
                        </div>

                        <div className="mt-4 pt-2 border-t border-slate-200">
                            <div className="font-mono text-xs text-slate-500">
                                EV = ({pRed} √ó 20) + ({pBlue} √ó 5)
                            </div>
                            <div className="font-mono text-xs text-slate-500">
                                EV = {pRed * 20} + {pBlue * 5}
                            </div>
                            <div className="font-bold text-lg text-emerald-600">
                                EV = {ev} points
                            </div>
                            <p className="text-xs text-slate-400">On average, you earn {ev} pts per throw.</p>
                        </div>
                    </div>
                </div>
            );
        };

        // ==========================================
        // MAIN APP COMPONENTS
        // ==========================================

        const HomeView = ({ onSelectModule, score, streak }) => {
            return (
                <div className="fade-in max-w-4xl mx-auto p-4">
                    <header className="mb-8 text-center">
                        <h1 className="text-4xl font-extrabold text-indigo-900 mb-2">StudyMastery</h1>
                        <p className="text-slate-500">Probability & Statistics Unit Review</p>
                        
                        <div className="flex justify-center gap-6 mt-6">
                            <div className="bg-white px-4 py-2 rounded-lg shadow-sm border border-slate-200 flex items-center gap-2">
                                <span className="text-yellow-500 text-xl">‚òÖ</span>
                                <span className="font-bold text-slate-700">{score} XP</span>
                            </div>
                            <div className="bg-white px-4 py-2 rounded-lg shadow-sm border border-slate-200 flex items-center gap-2">
                                <span className="text-orange-500 text-xl">üî•</span>
                                <span className="font-bold text-slate-700">{streak} Streak</span>
                            </div>
                        </div>
                    </header>

                    <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                        {curriculum.map((mod, idx) => (
                            <button 
                                key={mod.id}
                                onClick={() => onSelectModule(idx)}
                                className="bg-white p-6 rounded-2xl shadow-sm hover:shadow-md border border-slate-100 hover:border-indigo-200 transition-all text-left group"
                            >
                                <div className={`w-12 h-12 rounded-full bg-${mod.color}-100 text-${mod.color}-600 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform`}>
                                    {/* Icon Placeholder based on color logic */}
                                    <span className="font-bold text-xl">{idx + 1}</span>
                                </div>
                                <h2 className="text-xl font-bold text-slate-800 mb-2 group-hover:text-indigo-600">{mod.title}</h2>
                                <p className="text-sm text-slate-500 line-clamp-2">{mod.theory.intro}</p>
                                <div className="mt-4 text-xs font-semibold text-indigo-500 flex items-center">
                                    START MODULE <span>‚Üí</span>
                                </div>
                            </button>
                        ))}
                    </div>
                </div>
            );
        };

        const LearnView = ({ module, onNext }) => {
            return (
                <div className="fade-in max-w-3xl mx-auto p-4">
                    <button onClick={() => window.location.reload()} className="text-sm text-slate-400 hover:text-indigo-600 mb-4">‚Üê Back to Dashboard</button>
                    
                    <div className="bg-white rounded-2xl shadow-lg overflow-hidden">
                        <div className={`bg-${module.color}-600 p-8 text-white`}>
                            <div className="uppercase tracking-wide text-xs font-bold opacity-70 mb-2">Theory Phase</div>
                            <h2 className="text-3xl font-bold">{module.title}</h2>
                        </div>
                        
                        <div className="p-8">
                            <p className="text-lg text-slate-700 leading-relaxed mb-6">{module.theory.intro}</p>
                            
                            <div className="grid gap-4 mb-8">
                                {module.theory.points.map((pt, i) => (
                                    <div key={i} className="bg-slate-50 p-4 rounded-xl border-l-4 border-indigo-400">
                                        <h4 className="font-bold text-indigo-900 mb-1">{pt.title}</h4>
                                        <p className="text-slate-600">{pt.text}</p>
                                    </div>
                                ))}
                            </div>

                            {/* Inject Relevant Visualizer */}
                            {module.id === 'independent-dependent' && <UrnVisualizer />}
                            {module.id === 'modeling-randomness' && <DartboardVisualizer />}
                            {module.id === 'compound-probability' && (
                                <div className="bg-indigo-50 p-6 rounded-xl border border-indigo-100 my-4 text-center">
                                    <h3 className="font-bold text-indigo-800 mb-2">Visualizing Compound Events</h3>
                                    <p className="text-sm text-indigo-600 mb-4">Multiply fractions along the path.</p>
                                    <div className="flex justify-center items-center font-mono text-lg">
                                        <div className="bg-white px-3 py-1 rounded shadow">P(A)</div>
                                        <span className="mx-2">√ó</span>
                                        <div className="bg-white px-3 py-1 rounded shadow">P(B)</div>
                                        <span className="mx-2">=</span>
                                        <div className="bg-emerald-100 text-emerald-800 px-3 py-1 rounded shadow font-bold">P(A and B)</div>
                                    </div>
                                </div>
                            )}

                            <div className="mt-8 flex justify-end">
                                <button 
                                    onClick={onNext}
                                    className="bg-indigo-600 text-white px-8 py-3 rounded-full font-bold text-lg hover:bg-indigo-700 shadow-lg hover:shadow-xl transition-all flex items-center gap-2"
                                >
                                    Start Practice <span className="text-xl">‚Üí</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const PracticeView = ({ module, updateScore, goHome }) => {
            const [currentQ, setCurrentQ] = useState(0);
            const [selected, setSelected] = useState(null);
            const [isChecking, setIsChecking] = useState(false);
            const [feedback, setFeedback] = useState(null); // { isCorrect, text }
            const [completed, setCompleted] = useState(false);
            const [results, setResults] = useState({ correct: 0, total: module.questions.length });

            const question = module.questions[currentQ];

            const handleCheck = () => {
                if (selected === null) return;
                
                const isCorrect = selected === question.correct;
                setIsChecking(true);
                
                if (isCorrect) {
                    setFeedback({ type: 'success', text: "Correct! " + question.explanation });
                    updateScore(true);
                    setResults(prev => ({ ...prev, correct: prev.correct + 1 }));
                } else {
                    setFeedback({ type: 'error', text: "Not quite. " + question.explanation });
                    updateScore(false);
                }
            };

            const handleNext = () => {
                if (currentQ < module.questions.length - 1) {
                    setCurrentQ(prev => prev + 1);
                    setSelected(null);
                    setIsChecking(false);
                    setFeedback(null);
                } else {
                    setCompleted(true);
                }
            };

            if (completed) {
                return (
                    <div className="fade-in max-w-2xl mx-auto p-4 pt-12 text-center">
                        <div className="bg-white p-8 rounded-2xl shadow-lg border border-slate-100">
                            <div className="text-6xl mb-4">{results.correct === results.total ? 'üèÜ' : 'üëè'}</div>
                            <h2 className="text-3xl font-bold text-slate-800 mb-2">Module Complete!</h2>
                            <p className="text-slate-500 mb-6">You scored {results.correct} out of {results.total}</p>
                            
                            <div className="w-full bg-slate-100 rounded-full h-4 mb-8 overflow-hidden">
                                <div 
                                    className="bg-indigo-500 h-full transition-all duration-1000" 
                                    style={{ width: `${(results.correct/results.total)*100}%` }}
                                ></div>
                            </div>

                            <button 
                                onClick={goHome}
                                className="w-full bg-slate-900 text-white py-3 rounded-xl font-bold hover:bg-slate-800 transition-colors"
                            >
                                Back to Dashboard
                            </button>
                        </div>
                    </div>
                );
            }

            return (
                <div className="fade-in max-w-2xl mx-auto p-4 pt-8">
                    <div className="flex justify-between items-center mb-6 text-sm font-bold text-slate-400">
                        <span>QUESTION {currentQ + 1} OF {module.questions.length}</span>
                        <span>{module.title}</span>
                    </div>

                    <div className="bg-white p-8 rounded-2xl shadow-lg border border-slate-100 mb-6">
                        <h3 className="text-xl font-bold text-slate-800 mb-6 leading-relaxed">
                            {question.question}
                        </h3>

                        <div className="space-y-3">
                            {question.options.map((opt, idx) => (
                                <button
                                    key={idx}
                                    onClick={() => !isChecking && setSelected(idx)}
                                    disabled={isChecking}
                                    className={`w-full text-left p-4 rounded-xl border-2 transition-all flex justify-between items-center
                                        ${isChecking && idx === question.correct ? 'border-emerald-500 bg-emerald-50 text-emerald-900' : ''}
                                        ${isChecking && idx === selected && idx !== question.correct ? 'border-red-500 bg-red-50 text-red-900' : ''}
                                        ${!isChecking && selected === idx ? 'border-indigo-500 bg-indigo-50 text-indigo-900' : 'border-slate-100 hover:border-indigo-200 hover:bg-slate-50'}
                                    `}
                                >
                                    <span>{opt}</span>
                                    {isChecking && idx === question.correct && <span className="text-emerald-600">‚úì</span>}
                                    {isChecking && idx === selected && idx !== question.correct && <span className="text-red-600">‚úï</span>}
                                </button>
                            ))}
                        </div>
                    </div>

                    {feedback && (
                        <div className={`fade-in p-6 rounded-xl mb-6 ${feedback.type === 'success' ? 'bg-emerald-100 text-emerald-900' : 'bg-red-100 text-red-900'}`}>
                            <p className="font-bold mb-1">{feedback.type === 'success' ? 'Excellent!' : 'Review:'}</p>
                            <p className="text-sm opacity-90">{feedback.text}</p>
                        </div>
                    )}

                    {!isChecking ? (
                        <button 
                            onClick={handleCheck}
                            disabled={selected === null}
                            className="w-full bg-indigo-600 text-white py-4 rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-md"
                        >
                            Check Answer
                        </button>
                    ) : (
                        <button 
                            onClick={handleNext}
                            className="w-full bg-slate-900 text-white py-4 rounded-xl font-bold hover:bg-slate-800 transition-all shadow-md"
                        >
                            {currentQ < module.questions.length - 1 ? 'Next Question ‚Üí' : 'View Results'}
                        </button>
                    )}
                </div>
            );
        };

        const App = () => {
            const [view, setView] = useState('home'); // home, learn, practice
            const [activeModuleIdx, setActiveModuleIdx] = useState(0);
            const [score, setScore] = useState(0);
            const [streak, setStreak] = useState(0);

            const handleModuleSelect = (idx) => {
                setActiveModuleIdx(idx);
                setView('learn');
            };

            const handleScore = (isCorrect) => {
                if (isCorrect) {
                    setScore(s => s + 100 + (streak * 10));
                    setStreak(s => s + 1);
                } else {
                    setStreak(0);
                }
            };

            return (
                <div className="min-h-screen bg-slate-50 font-sans text-slate-900 pb-12">
                    {/* Navigation Bar */}
                    <nav className="bg-white border-b border-slate-200 sticky top-0 z-10">
                        <div className="max-w-4xl mx-auto px-4 h-16 flex items-center justify-between">
                            <div className="font-black text-indigo-600 text-xl tracking-tight cursor-pointer" onClick={() => setView('home')}>
                                StudyMastery
                            </div>
                            {view !== 'home' && (
                                <div className="text-xs font-bold bg-slate-100 px-3 py-1 rounded-full text-slate-500 uppercase">
                                    {curriculum[activeModuleIdx].title}
                                </div>
                            )}
                        </div>
                    </nav>

                    {view === 'home' && (
                        <HomeView 
                            onSelectModule={handleModuleSelect} 
                            score={score}
                            streak={streak}
                        />
                    )}

                    {view === 'learn' && (
                        <LearnView 
                            module={curriculum[activeModuleIdx]} 
                            onNext={() => setView('practice')}
                        />
                    )}

                    {view === 'practice' && (
                        <PracticeView 
                            module={curriculum[activeModuleIdx]} 
                            updateScore={handleScore}
                            goHome={() => setView('home')}
                        />
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

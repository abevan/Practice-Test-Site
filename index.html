<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudyMastery: Geometry Edition</title>
    
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <script src="https://cdn.tailwindcss.com"></script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        .fade-in { animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- ICONS ---
        const Icon = ({ children, size = 20, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {children}
            </svg>
        );
        const TriangleIcon = (props) => <Icon {...props}><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/></Icon>;
        const Calculator = (props) => <Icon {...props}><rect x="4" y="2" width="16" height="20" rx="2"/><line x1="8" y1="6" x2="16" y2="6"/><line x1="16" y1="14" x2="16" y2="14"/><line x1="8" y1="14" x2="8" y2="14"/><line x1="12" y1="14" x2="12" y2="14"/><line x1="8" y1="18" x2="8" y2="18"/><line x1="12" y1="18" x2="12" y2="18"/><line x1="16" y1="18" x2="16" y2="18"/></Icon>;
        const Mountain = (props) => <Icon {...props}><path d="m8 3 4 8 5-5 5 15H2L8 3z"/></Icon>;
        const CheckCircle = (props) => <Icon {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></Icon>;
        const XCircle = (props) => <Icon {...props}><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></Icon>;
        const ArrowRight = (props) => <Icon {...props}><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></Icon>;
        const ChevronLeft = (props) => <Icon {...props}><polyline points="15 18 9 12 15 6"/></Icon>;

        // --- VISUALIZERS ---
        
        // Dynamic Right Triangle
        const RightTriangleVisual = ({ a = "a", b = "b", c = "c", angleA = "", angleB = "", highlight }) => (
            <div className="flex flex-col items-center justify-center p-4 bg-white rounded-xl shadow-sm border border-slate-200">
                <svg width="200" height="200" viewBox="-10 -10 120 120" className="overflow-visible">
                    {/* Triangle */}
                    <path d="M0 100 L100 100 L0 0 Z" fill="none" stroke="#4F46E5" strokeWidth="3" />
                    {/* Right Angle Box */}
                    <rect x="0" y="85" width="15" height="15" fill="none" stroke="#94A3B8" strokeWidth="2" />
                    
                    {/* Labels */}
                    <text x="-15" y="50" className="text-sm font-bold fill-slate-700" textAnchor="middle">{a}</text>
                    <text x="50" y="115" className="text-sm font-bold fill-slate-700" textAnchor="middle">{b}</text>
                    <text x="60" y="45" className="text-sm font-bold fill-slate-700" textAnchor="middle">{c}</text>
                    
                    {/* Angles */}
                    {angleA && <text x="75" y="90" className="text-xs fill-slate-500">{angleA}</text>}
                    {angleB && <text x="10" y="15" className="text-xs fill-slate-500">{angleB}</text>}
                </svg>
                <p className="mt-2 text-xs text-slate-400 font-mono text-center">Right Triangle Model</p>
            </div>
        );

        // Special Triangles Visualizer
        const SpecialTriangleVisual = ({ type }) => {
            const is45 = type === '45-45-90';
            return (
                <div className="flex flex-col items-center justify-center p-4 bg-white rounded-xl shadow-sm border border-slate-200">
                    <svg width="200" height="180" viewBox="-10 -10 120 120" className="overflow-visible">
                        {is45 ? (
                            // 45-45-90
                            <>
                                <path d="M0 100 L100 100 L0 0 Z" fill="none" stroke="#0ea5e9" strokeWidth="3" />
                                <text x="-15" y="50" className="text-sm font-bold fill-slate-700">x</text>
                                <text x="50" y="115" className="text-sm font-bold fill-slate-700">x</text>
                                <text x="60" y="45" className="text-sm font-bold text-blue-600 fill-blue-600">x‚àö2</text>
                                <text x="10" y="15" className="text-xs fill-slate-500">45¬∞</text>
                                <text x="80" y="90" className="text-xs fill-slate-500">45¬∞</text>
                            </>
                        ) : (
                            // 30-60-90
                            <>
                                <path d="M0 100 L60 100 L0 0 Z" fill="none" stroke="#7c3aed" strokeWidth="3" />
                                <text x="-25" y="50" className="text-sm font-bold text-purple-600 fill-purple-600">x‚àö3</text>
                                <text x="30" y="115" className="text-sm font-bold fill-slate-700">x</text>
                                <text x="40" y="45" className="text-sm font-bold fill-slate-700">2x</text>
                                <text x="5" y="15" className="text-xs fill-slate-500">30¬∞</text>
                                <text x="45" y="90" className="text-xs fill-slate-500">60¬∞</text>
                            </>
                        )}
                        <rect x="0" y="85" width="15" height="15" fill="none" stroke="#94A3B8" strokeWidth="2" />
                    </svg>
                    <p className="mt-2 text-xs text-slate-400 font-mono">{is45 ? "Isosceles Right Triangle" : "Half Equilateral Triangle"}</p>
                </div>
            );
        };

        // --- CURRICULUM DATA ---

        const TOPICS = [
            {
                id: 'pythag',
                title: 'Pythagorean Theorem',
                icon: <TriangleIcon size={24} />,
                description: 'Determine side lengths and classify triangles.',
                theory: (
                    <div className="space-y-6">
                        <div className="bg-indigo-50 p-4 rounded-xl border border-indigo-100">
                            <h3 className="text-lg font-bold text-indigo-900 mb-2">The Golden Rule</h3>
                            <p className="mb-3 text-indigo-800">For any right triangle with legs <strong>a</strong> and <strong>b</strong> and hypotenuse <strong>c</strong>:</p>
                            <div className="text-2xl font-mono text-center bg-white p-3 rounded-lg shadow-sm text-indigo-600 font-bold border border-indigo-200">
                                a¬≤ + b¬≤ = c¬≤
                            </div>
                        </div>

                        <div className="grid md:grid-cols-2 gap-4">
                            <div>
                                <h4 className="font-bold text-slate-700 mb-2">Finding a Side</h4>
                                <ul className="list-disc pl-5 space-y-2 text-sm text-slate-600">
                                    <li><strong>Missing Hypotenuse (c):</strong> Square the legs, add them, then take the square root.</li>
                                    <li><strong>Missing Leg (a or b):</strong> Square the hypotenuse, subtract the squared leg, then take the square root.</li>
                                </ul>
                            </div>
                            <RightTriangleVisual a="Leg" b="Leg" c="Hyp" />
                        </div>

                        <div className="bg-amber-50 p-4 rounded-xl border border-amber-100">
                            <h3 className="text-lg font-bold text-amber-900 mb-2">The Converse (Classifying Triangles)</h3>
                            <p className="text-sm text-amber-800 mb-2">Compare <strong>c¬≤</strong> to <strong>a¬≤ + b¬≤</strong> (where c is the longest side):</p>
                            <div className="grid grid-cols-1 gap-2 text-sm">
                                <div className="bg-white px-3 py-2 rounded border border-amber-200 flex justify-between">
                                    <span>c¬≤ = a¬≤ + b¬≤</span>
                                    <span className="font-bold text-green-600">Right Triangle</span>
                                </div>
                                <div className="bg-white px-3 py-2 rounded border border-amber-200 flex justify-between">
                                    <span>c¬≤ < a¬≤ + b¬≤</span>
                                    <span className="font-bold text-blue-600">Acute Triangle</span>
                                </div>
                                <div className="bg-white px-3 py-2 rounded border border-amber-200 flex justify-between">
                                    <span>c¬≤ > a¬≤ + b¬≤</span>
                                    <span className="font-bold text-red-600">Obtuse Triangle</span>
                                </div>
                            </div>
                        </div>
                    </div>
                ),
                questions: [
                    {
                        question: "A right triangle has legs of length 5 and 12. What is the length of the hypotenuse?",
                        options: ["13", "15", "17", "‚àö119"],
                        correctIndex: 0,
                        explanation: "Use a¬≤ + b¬≤ = c¬≤. 5¬≤ + 12¬≤ = 25 + 144 = 169. ‚àö169 = 13."
                    },
                    {
                        question: "A triangle has sides 7, 8, and 12. What type of triangle is it?",
                        options: ["Acute", "Right", "Obtuse", "Isosceles"],
                        correctIndex: 2,
                        explanation: "Check c¬≤ vs a¬≤ + b¬≤. Longest side is 12. 12¬≤ = 144. 7¬≤ + 8¬≤ = 49 + 64 = 113. Since 144 > 113, c¬≤ is greater, so it is Obtuse."
                    },
                    {
                        question: "A painter leans a 15-foot ladder against a wall. The base is 9 feet from the wall. How high up the wall does it reach?",
                        options: ["6 ft", "12 ft", "10 ft", "‚àö306 ft"],
                        correctIndex: 1,
                        explanation: "Ladder is hypotenuse (15). Base is leg (9). b¬≤ = 15¬≤ - 9¬≤ = 225 - 81 = 144. ‚àö144 = 12."
                    }
                ]
            },
            {
                id: 'special',
                title: 'Special Right Triangles',
                icon: <Icon><path d="M21 16V4H9l12 12z"/></Icon>,
                description: 'Shortcuts for 45-45-90 and 30-60-90 triangles.',
                theory: (
                    <div className="space-y-6">
                        <div className="grid md:grid-cols-2 gap-6">
                            {/* 45-45-90 */}
                            <div className="space-y-2">
                                <h3 className="font-bold text-blue-700">45¬∞-45¬∞-90¬∞ Rules</h3>
                                <SpecialTriangleVisual type="45-45-90" />
                                <div className="bg-blue-50 p-3 rounded text-sm text-blue-900">
                                    <p>Legs are equal (x).</p>
                                    <p className="font-bold mt-1">Hypotenuse = Leg √ó ‚àö2</p>
                                </div>
                            </div>
                            
                            {/* 30-60-90 */}
                            <div className="space-y-2">
                                <h3 className="font-bold text-purple-700">30¬∞-60¬∞-90¬∞ Rules</h3>
                                <SpecialTriangleVisual type="30-60-90" />
                                <div className="bg-purple-50 p-3 rounded text-sm text-purple-900">
                                    <p>Everything relates to the <strong>Short Leg</strong>.</p>
                                    <ul className="list-disc pl-4 mt-1 space-y-1">
                                        <li>Hypotenuse = 2 √ó Short Leg</li>
                                        <li>Long Leg = Short Leg √ó ‚àö3</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                ),
                questions: [
                    {
                        question: "In a 45¬∞-45¬∞-90¬∞ triangle, one leg is 8. What is the length of the hypotenuse?",
                        options: ["8", "16", "8‚àö2", "8‚àö3"],
                        correctIndex: 2,
                        explanation: "In a 45-45-90 triangle, Hypotenuse = Leg √ó ‚àö2. So, 8‚àö2."
                    },
                    {
                        question: "In a 30¬∞-60¬∞-90¬∞ triangle, the hypotenuse is 20. What is the length of the shorter leg?",
                        options: ["10", "10‚àö3", "20‚àö2", "40"],
                        correctIndex: 0,
                        explanation: "Hypotenuse = 2 √ó Short Leg. 20 = 2x, so x = 10."
                    },
                    {
                        question: "An equilateral triangle has a height of 5‚àö3. What is the length of one side?",
                        options: ["5", "10", "15", "5‚àö2"],
                        correctIndex: 1,
                        explanation: "Splitting an equilateral triangle creates two 30-60-90 triangles. The height is the Long Leg (x‚àö3). Here, x‚àö3 = 5‚àö3, so x (short leg) = 5. The side of the equilateral triangle is 2x, which is 10."
                    }
                ]
            },
            {
                id: 'trig',
                title: 'Trigonometry Ratios',
                icon: <Calculator size={24} />,
                description: 'SOH CAH TOA and solving for sides/angles.',
                theory: (
                    <div className="space-y-6">
                        <div className="flex items-center justify-center bg-slate-800 text-white p-6 rounded-xl shadow-lg">
                            <h1 className="text-4xl font-black tracking-widest">SOH CAH TOA</h1>
                        </div>
                        
                        <div className="grid gap-3 text-sm">
                            <div className="bg-pink-50 p-3 rounded border border-pink-200">
                                <strong className="text-pink-700 text-lg">SOH</strong> : Sin(Œ∏) = Opposite / Hypotenuse
                            </div>
                            <div className="bg-teal-50 p-3 rounded border border-teal-200">
                                <strong className="text-teal-700 text-lg">CAH</strong> : Cos(Œ∏) = Adjacent / Hypotenuse
                            </div>
                            <div className="bg-orange-50 p-3 rounded border border-orange-200">
                                <strong className="text-orange-700 text-lg">TOA</strong> : Tan(Œ∏) = Opposite / Adjacent
                            </div>
                        </div>

                        <div className="bg-slate-100 p-4 rounded-xl">
                            <h4 className="font-bold text-slate-700 mb-2">When to use what?</h4>
                            <ul className="list-disc pl-5 space-y-2 text-sm text-slate-600">
                                <li><strong>Missing Side?</strong> Use regular sin, cos, or tan. (e.g., x = 10 * sin(30))</li>
                                <li><strong>Missing Angle?</strong> Use inverse trig (sin‚Åª¬π, cos‚Åª¬π, tan‚Åª¬π).</li>
                            </ul>
                        </div>
                    </div>
                ),
                questions: [
                    {
                        question: "In a right triangle, angle A is 30¬∞. The hypotenuse is 100. What is the length of the opposite side?",
                        options: ["50", "86.6", "100", "200"],
                        correctIndex: 0,
                        explanation: "Use SOH. Sin(30¬∞) = Opp / 100. 0.5 = x / 100. x = 50."
                    },
                    {
                        question: "A ramp rises 5 feet over a horizontal distance of 12 feet. What is Tan(Œ∏) of the angle of elevation?",
                        options: ["12/5", "5/12", "5/13", "12/13"],
                        correctIndex: 1,
                        explanation: "TOA means Tan = Opposite / Adjacent. Rise (Opposite) = 5, Run (Adjacent) = 12. So 5/12."
                    },
                    {
                        question: "Which function would you use to find an angle if you know the Adjacent leg and the Hypotenuse?",
                        options: ["Sine", "Cosine", "Tangent", "Pythagoras"],
                        correctIndex: 1,
                        explanation: "Adjacent and Hypotenuse relate to CAH -> Cosine."
                    }
                ]
            },
            {
                id: 'elevation',
                title: 'Angles of Elevation & Depression',
                icon: <Mountain size={24} />,
                description: 'Word problems involving looking up or down.',
                theory: (
                    <div className="space-y-6">
                        <div className="bg-white p-4 rounded-xl border border-slate-200 shadow-sm">
                            <h3 className="font-bold text-slate-800 mb-4">Definitions</h3>
                            <div className="space-y-4">
                                <div className="flex gap-4 items-start">
                                    <div className="bg-blue-100 p-2 rounded text-blue-600 font-bold">Elevation</div>
                                    <p className="text-sm text-slate-600">Looking <strong>UP</strong> from the horizontal. (Ground to Top of Building)</p>
                                </div>
                                <div className="flex gap-4 items-start">
                                    <div className="bg-green-100 p-2 rounded text-green-600 font-bold">Depression</div>
                                    <p className="text-sm text-slate-600">Looking <strong>DOWN</strong> from the horizontal. (Airplane to Airport)</p>
                                </div>
                            </div>
                        </div>

                        <div className="bg-yellow-50 p-4 rounded-xl border border-yellow-200 text-sm">
                            <strong className="block text-yellow-800 mb-1">PRO TIP: Alternate Interior Angles</strong>
                            <p>The Angle of Depression from the top is usually <strong>EQUAL</strong> to the Angle of Elevation from the bottom because the horizontal lines are parallel!</p>
                        </div>
                    </div>
                ),
                questions: [
                    {
                        question: "An airplane pilot sights the runway at a 20¬∞ angle of depression. If the plane is 2,000 ft high, what is the ground distance (x) to the runway?",
                        options: ["2000 * tan(20)", "2000 / tan(20)", "2000 * sin(20)", "2000 / cos(20)"],
                        correctIndex: 1,
                        explanation: "Angle of depression = Angle of elevation = 20¬∞. We have Opposite (height = 2000) and need Adjacent (x). Tan(20) = 2000/x. Solve for x: x = 2000 / tan(20)."
                    },
                    {
                        question: "You stand 100 feet from a tree. The angle of elevation to the top is 45¬∞. How tall is the tree?",
                        options: ["50 ft", "100 ft", "141 ft", "200 ft"],
                        correctIndex: 1,
                        explanation: "Tan(45¬∞) = Height / 100. Since Tan(45¬∞) = 1, Height = 100."
                    },
                    {
                        question: "Which describes the angle of depression?",
                        options: ["Angle between line of sight and vertical", "Angle looking up from ground", "Angle between horizontal and looking down", "Angle inside the object"],
                        correctIndex: 2,
                        explanation: "Depression is always measured from the HORIZONTAL line, looking down."
                    }
                ]
            }
        ];

        // --- COMPONENTS ---

        function App() {
            const [view, setView] = useState('home'); // home, learn, practice, results
            const [activeTopicId, setActiveTopicId] = useState(null);
            const [currentQuestionIdx, setCurrentQuestionIdx] = useState(0);
            const [score, setScore] = useState(0);
            const [streak, setStreak] = useState(0);
            const [feedback, setFeedback] = useState(null); // { type: 'correct' | 'incorrect', text: '' }

            const activeTopic = TOPICS.find(t => t.id === activeTopicId);

            const handleStartTopic = (topicId) => {
                setActiveTopicId(topicId);
                setView('learn');
            };

            const handleStartPractice = () => {
                setCurrentQuestionIdx(0);
                setScore(0);
                setStreak(0);
                setFeedback(null);
                setView('practice');
            };

            const handleAnswer = (index) => {
                if (feedback) return; // Prevent double clicking

                const question = activeTopic.questions[currentQuestionIdx];
                const isCorrect = index === question.correctIndex;

                if (isCorrect) {
                    setScore(s => s + 10);
                    setStreak(s => s + 1);
                    setFeedback({ type: 'correct', text: 'Correct! ' + question.explanation });
                } else {
                    setStreak(0);
                    setFeedback({ type: 'incorrect', text: 'Not quite. ' + question.explanation });
                }
            };

            const nextQuestion = () => {
                setFeedback(null);
                if (currentQuestionIdx < activeTopic.questions.length - 1) {
                    setCurrentQuestionIdx(prev => prev + 1);
                } else {
                    setView('results');
                }
            };

            // --- VIEWS ---

            if (view === 'home') {
                return (
                    <div className="min-h-screen bg-slate-50 p-4 md:p-8 max-w-4xl mx-auto">
                        <header className="mb-8 text-center">
                            <h1 className="text-3xl md:text-4xl font-extrabold text-slate-900 mb-2 tracking-tight">StudyMastery</h1>
                            <p className="text-slate-500 font-medium">Common Core Geometry Unit 4</p>
                        </header>
                        
                        <div className="grid md:grid-cols-2 gap-4">
                            {TOPICS.map(topic => (
                                <button 
                                    key={topic.id}
                                    onClick={() => handleStartTopic(topic.id)}
                                    className="group bg-white p-6 rounded-2xl shadow-sm border border-slate-200 hover:border-indigo-500 hover:shadow-md transition-all text-left flex items-start gap-4"
                                >
                                    <div className="bg-indigo-50 text-indigo-600 p-3 rounded-xl group-hover:bg-indigo-600 group-hover:text-white transition-colors">
                                        {topic.icon}
                                    </div>
                                    <div>
                                        <h2 className="font-bold text-lg text-slate-800 group-hover:text-indigo-700">{topic.title}</h2>
                                        <p className="text-sm text-slate-500 mt-1">{topic.description}</p>
                                    </div>
                                </button>
                            ))}
                        </div>
                    </div>
                );
            }

            if (view === 'learn' && activeTopic) {
                return (
                    <div className="min-h-screen bg-white">
                        <div className="max-w-3xl mx-auto p-4 md:p-8">
                            <button onClick={() => setView('home')} className="flex items-center text-slate-500 hover:text-indigo-600 font-medium mb-6 transition-colors">
                                <ChevronLeft size={20} className="mr-1" /> Back to Dashboard
                            </button>

                            <div className="flex items-center gap-3 mb-6">
                                <div className="p-2 bg-indigo-100 text-indigo-700 rounded-lg">
                                    {activeTopic.icon}
                                </div>
                                <h1 className="text-3xl font-bold text-slate-900">{activeTopic.title}</h1>
                            </div>

                            <div className="prose prose-slate max-w-none mb-10 fade-in">
                                {activeTopic.theory}
                            </div>

                            <div className="fixed bottom-0 left-0 right-0 p-4 bg-white border-t border-slate-200 flex justify-center shadow-lg">
                                <button 
                                    onClick={handleStartPractice}
                                    className="bg-indigo-600 text-white px-8 py-3 rounded-full font-bold text-lg shadow-indigo-200 shadow-xl hover:bg-indigo-700 transform hover:-translate-y-1 transition-all flex items-center gap-2"
                                >
                                    Start Practice <ArrowRight size={20} />
                                </button>
                            </div>
                            <div className="h-20"></div> {/* Spacer for fixed bottom bar */}
                        </div>
                    </div>
                );
            }

            if (view === 'practice' && activeTopic) {
                const question = activeTopic.questions[currentQuestionIdx];
                const progress = ((currentQuestionIdx) / activeTopic.questions.length) * 100;

                return (
                    <div className="min-h-screen bg-slate-50 flex flex-col items-center justify-center p-4">
                        <div className="w-full max-w-2xl">
                            {/* Header Stats */}
                            <div className="flex justify-between items-center mb-6 px-2">
                                <button onClick={() => setView('home')} className="text-slate-400 hover:text-slate-600 transition-colors">
                                    <XCircle size={24} />
                                </button>
                                <div className="flex gap-4 font-bold">
                                    <span className="text-orange-500 flex items-center gap-1">
                                        üî• {streak}
                                    </span>
                                    <span className="text-indigo-600">
                                        {score} pts
                                    </span>
                                </div>
                            </div>

                            {/* Progress Bar */}
                            <div className="h-2 bg-slate-200 rounded-full mb-8 overflow-hidden">
                                <div className="h-full bg-indigo-500 transition-all duration-500" style={{ width: `${progress}%` }}></div>
                            </div>

                            {/* Question Card */}
                            <div className="bg-white rounded-2xl shadow-lg border border-slate-200 p-6 md:p-10 fade-in relative overflow-hidden">
                                <div className="mb-6">
                                    <span className="text-xs font-bold tracking-wider text-slate-400 uppercase mb-2 block">Question {currentQuestionIdx + 1} of {activeTopic.questions.length}</span>
                                    <h2 className="text-xl md:text-2xl font-bold text-slate-800 leading-snug">
                                        {question.question}
                                    </h2>
                                </div>

                                <div className="grid gap-3">
                                    {question.options.map((opt, idx) => (
                                        <button
                                            key={idx}
                                            onClick={() => handleAnswer(idx)}
                                            disabled={!!feedback}
                                            className={`w-full p-4 rounded-xl border-2 font-medium text-left transition-all
                                                ${feedback 
                                                    ? idx === question.correctIndex 
                                                        ? 'border-green-500 bg-green-50 text-green-700' 
                                                        : feedback.type === 'incorrect' && idx === activeTopic.questions[currentQuestionIdx].options.indexOf(opt) // simplified logic for demo
                                                            ? 'opacity-50' 
                                                            : 'border-slate-100 text-slate-400'
                                                    : 'border-slate-100 hover:border-indigo-200 hover:bg-indigo-50 text-slate-600'
                                                }
                                            `}
                                        >
                                            {opt}
                                        </button>
                                    ))}
                                </div>

                                {/* Feedback Overlay */}
                                {feedback && (
                                    <div className={`mt-6 p-4 rounded-xl border ${feedback.type === 'correct' ? 'bg-green-50 border-green-200 text-green-800' : 'bg-red-50 border-red-200 text-red-800'} fade-in`}>
                                        <div className="flex items-start gap-3">
                                            <div className="mt-1">
                                                {feedback.type === 'correct' ? <CheckCircle size={20} /> : <XCircle size={20} />}
                                            </div>
                                            <div>
                                                <p className="font-bold">{feedback.type === 'correct' ? 'Nice work!' : 'Keep trying!'}</p>
                                                <p className="text-sm mt-1 opacity-90">{feedback.text}</p>
                                            </div>
                                        </div>
                                        <button 
                                            onClick={nextQuestion}
                                            className={`mt-4 w-full py-3 rounded-lg font-bold text-white transition-colors ${feedback.type === 'correct' ? 'bg-green-600 hover:bg-green-700' : 'bg-red-600 hover:bg-red-700'}`}
                                        >
                                            {currentQuestionIdx === activeTopic.questions.length - 1 ? 'See Results' : 'Next Question'}
                                        </button>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                );
            }

            if (view === 'results') {
                const maxScore = activeTopic.questions.length * 10;
                const percentage = Math.round((score / maxScore) * 100);
                
                return (
                    <div className="min-h-screen bg-slate-50 flex items-center justify-center p-4">
                        <div className="bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center fade-in">
                            <div className="w-24 h-24 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-6 text-6xl">
                                {percentage >= 80 ? 'üèÜ' : percentage >= 60 ? 'üåü' : 'üìö'}
                            </div>
                            
                            <h2 className="text-3xl font-black text-slate-900 mb-2">{percentage >= 80 ? 'Mastery Achieved!' : 'Good Effort!'}</h2>
                            <p className="text-slate-500 mb-6">You scored {score} out of {maxScore} points.</p>
                            
                            <div className="flex gap-3">
                                <button 
                                    onClick={() => setView('home')}
                                    className="flex-1 py-3 rounded-xl border border-slate-200 font-bold text-slate-600 hover:bg-slate-50 transition-colors"
                                >
                                    Menu
                                </button>
                                <button 
                                    onClick={handleStartPractice}
                                    className="flex-1 py-3 rounded-xl bg-indigo-600 text-white font-bold hover:bg-indigo-700 transition-colors"
                                >
                                    Retry
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }

            return null;
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
